require 'drb/drb'
require 'vimwiki_markdown'

# The URI for the server to connect to
URI="druby://localhost:8787"

class VimwikiMarkdownService

  def generate_html(options)
    VimwikiMarkdown.convert_wikimarkdown_to_html(options)
  end

end

# The object that handles requests on the server
FRONT_OBJECT=VimwikiMarkdownService.new

# $SAFE = 1   # disable eval() and friends

DRb.start_service(URI, FRONT_OBJECT)
# Wait for the drb server thread to finish before exiting.
DRb.thread.join
